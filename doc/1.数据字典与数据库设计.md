# 数据字典与数据库设计

## 商品相关

### 商品类别 product category

商品类别是商品的分类依据，每个商品仅能从属于一个商品类别，类别与类别之间不设置从属关系。商品类别中包括类别的id和类别名称。

```SQL
CREATE TABLE `product_category` 
(
    `id` VARCHAR(255) NOT NULL PRIMARY KEY,
    `name` VARCHAR(255) NOT NULL
);
```

### 商品 product

商品即为上架的一种货物，每个商品必定从属于一种类别，但可以有很多标签。商品中包含id、名称、所属类别、品类、规格、当前单价、当前库存。

其中，所属类别为上述定义的商品类别，而品类为用户自定义的分类。如“车厘子”，其商品类别为“水果”，而品类为自定义的“智利进口”。

其中，规格一般指包装方式、每份含量等。

```SQL
CREATE TABLE `product` 
(
    `id` VARCHAR(255) NOT NULL PRIMARY KEY,
    `name` VARCHAR(255) NOT NULL,
    `category_id` VARCHAR(255) NOT NULL,
    `type` VARCHAR(255) NOT NULL,
    `specification` VARCHAR(255) NOT NULL,
    `current_price` DOUBLE NOT NULL,
    `inventory` DOUBLE NOT NULL
);
```

### 商品图片 product image

商品图片是商品介绍用的图片，与商品为多对一的关系，每张图片包括图片id、所属商品id，以及图片路径。

```SQL
CREATE TABLE `product_image`
(
    `id` VARCHAR(255) NOT NULL PRIMARY KEY,
    `product_id` VARCHAR(255) NOT NULL,
    `path` VARCHAR(255) NOT NULL
);
```

### 商品价格历史 product price history

商品价格历史为每个商品的历史售价，便于核算订单撕逼，以及宣传史低等。包括id、商品id、价格以及创建时间。

```SQL
CREATE TABLE `product_price_history` 
(
    `id` VARCHAR(255) NOT NULL PRIMARY KEY,
    `product_id` VARCHAR(255) NOT NULL,
    `price` DOUBLE NOT NULL,
    `create_time` VARCHAR(255) NOT NULL
);
```

### 商品详情 product detail

商品详情为富文本形式的商品介绍。

```SQL
CREATE TABLE `product_detail` 
(
    `id` VARCHAR(255) NOT NULL PRIMARY KEY,
    `product_id` VARCHAR(255) NOT NULL,
    `content` TEXT
);
```

### 商品标签 product tag

商品标签是给商品打上的多样化的标签，便于检索和分类。标签与商品为多对多的关系。包括id和名称。

```SQL
CREATE TABLE `product_tag` 
(
    `id` VARCHAR(255) NOT NULL PRIMARY KEY,
    `name` VARCHAR(255) NOT NULL
);
```

### 商品标签绑定 product tag map

商品标签绑定是为了体现标签与商品多对多绑定的关联表。

```SQL
CREATE TABLE `product_tag_map` 
(
    `product_id` VARCHAR(255) NOT NULL,
    `tag_id` VARCHAR(255) NOT NULL,
    PRIMARY KEY (`product_id`, `tag_id`)
);
```

## 支付相关

TODO